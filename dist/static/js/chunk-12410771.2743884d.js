(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-12410771"],{"66ea":function(e,t,a){"use strict";var r=a("a14a4"),i=a.n(r);i.a},"73cf":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"register"},[a("div",{staticClass:"main"},[a("el-steps",{staticStyle:{"margin-bottom":"50px"},attrs:{active:e.activeStep,"finish-status":"success"}},[a("el-step",{attrs:{title:"填写账户信息"}}),e._v(" "),a("el-step",{attrs:{title:"验证账户信息"}}),e._v(" "),a("el-step",{attrs:{title:"注册成功"}})],1),e._v(" "),0===e.activeStep?[a("el-form",{ref:"formBase",staticStyle:{width:"80%"},attrs:{model:e.formBaseData,rules:e.formBaseRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"用户名：",prop:"account",rules:[{required:!0,message:"用户名为必填项",trigger:"blur"},{pattern:/^[a-zA-Z\u4E00-\u9FA5][a-zA-Z0-9_\u4E00-\u9FA5]{2,19}$/,message:"格式错误",trigger:"blur"}]}},[a("el-input",{attrs:{placeholder:"3-20位，中文、字母、数字、下划线的组合，以中文或字母开头"},model:{value:e.formBaseData.account,callback:function(t){e.$set(e.formBaseData,"account",t)},expression:"formBaseData.account"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱：",prop:"email",rules:[{required:!0,message:"邮箱为必填项",trigger:"blur"},{type:"email",message:"邮箱格式错误",trigger:"blur"}]}},[a("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.formBaseData.email,callback:function(t){e.$set(e.formBaseData,"email",t)},expression:"formBaseData.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号：",prop:"phone",rules:[{required:!0,message:"手机号为必填项",trigger:"blur"},{pattern:/^1[34578]\d{9}$/,message:"手机格式有误",trigger:"blur"}]}},[a("el-input",{attrs:{placeholder:"请填写11位有效的手机号码"},model:{value:e.formBaseData.phone,callback:function(t){e.$set(e.formBaseData,"phone",t)},expression:"formBaseData.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码：",prop:"password",rules:[{required:!0,message:"密码为必填项",trigger:"blur"},{pattern:/^[a-zA-Z0-9_\-!@#$%^&*? ]{6,12}$/,message:"密码格式有误",trigger:"blur"}]}},[a("el-input",{attrs:{type:"password",placeholder:"6-20位英文（区分大小写）、数字、字符的组合"},model:{value:e.formBaseData.password,callback:function(t){e.$set(e.formBaseData,"password",t)},expression:"formBaseData.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码：",prop:"passwordConfirm"}},[a("el-input",{attrs:{type:"password",placeholder:"请再输入一遍上面的密码"},model:{value:e.formBaseData.passwordConfirm,callback:function(t){e.$set(e.formBaseData,"passwordConfirm",t)},expression:"formBaseData.passwordConfirm"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"",prop:"agree",rules:[{required:!0,message:"请先同意协议",trigger:"change"}]}},[a("el-checkbox",{attrs:{name:"agree"},model:{value:e.formBaseData.agree,callback:function(t){e.$set(e.formBaseData,"agree",t)},expression:"formBaseData.agree"}}),e._v(" "),a("el-button",{attrs:{type:"text"}},[e._v("我已阅读并同意条款")])],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{staticStyle:{width:"80%"},attrs:{type:"primary"},on:{click:e.handleValidatorBaseInfo}},[e._v("下一步\n          ")])],1)],1)]:e._e(),e._v(" "),1===e.activeStep?[a("div",{staticClass:"alert alert-info"},[e._v("短信已发送至您手机，请输入短信中的验证码，确保您的手机号真实有效。")]),e._v(" "),a("el-form",{ref:"formVerification",staticStyle:{width:"80%"},attrs:{model:e.formBaseData,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"手机号："}},[a("el-button",{attrs:{type:"text"}},[e._v(e._s(e.formBaseData.phone))])],1),e._v(" "),a("el-form-item",{attrs:{prop:"verifyCode",label:"验证码：",rules:[{required:!0,message:"验证码为必填项",trigger:"blur"},{pattern:/^\d{6}$/,message:"格式错误，6位验证码",trigger:"blur"}]}},[a("el-row",[a("el-col",{attrs:{span:14}},[a("el-input",{attrs:{placeholder:"请输入验证码"},model:{value:e.formBaseData.verifyCode,callback:function(t){e.$set(e.formBaseData,"verifyCode",t)},expression:"formBaseData.verifyCode"}})],1),e._v(" "),a("el-col",{attrs:{span:9,push:1}},[a("el-button",{attrs:{disabled:"获取验证码"!==e.verificationTxt},on:{click:e.handleGetVerification}},[e._v(e._s(e.verificationTxt)+"\n              ")])],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{staticStyle:{width:"80%"},attrs:{type:"primary"},on:{click:e.handleRegister}},[e._v("注册\n          ")])],1)],1)]:e._e(),e._v(" "),3===e.activeStep?[a("div",{staticStyle:{"text-align":"center"}},[a("p",{staticStyle:{"margin-bottom":"50px"}},[e._v("恭喜你注册成功！")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleGoToHome}},[e._v(e._s(e.timeGoToHome)+"后跳转到首页\n        ")])],1)]:e._e()],2)])},i=[],s=(a("96cf"),a("3b8d")),o={data:function(){var e=this,t=function(t,a,r){a!==e.formBaseData.password?r(new Error("两次密码不一致")):r()};return{activeStep:0,formBaseData:{},timeGoToHome:5,timerGoToHome:null,formBaseRules:{passwordConfirm:[{required:!0,message:"确认密码为必填项",trigger:"blur"},{validator:t,trigger:"blur"}]},timeVerification:60,timerVerification:null,verificationTxt:"获取验证码"}},mounted:function(){},methods:{handleValidatorBaseInfo:function(){var e=this;this.$refs.formBase.validate((function(t){if(!t)return!1;e.formBaseData.agree?(e.activeStep=1,e.fetchVerification()):e.$message({type:"error",message:"请先勾选协议",customClass:"el-message-custom"})}))},handleRegister:function(){var e=this;this.$refs.formVerification.validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a&&e.$api.REGISTER({data:e.formBaseData}).then((function(t){e.handleRegisterSuccess(t.data)}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleRegisterSuccess:function(e){var t=this;console.log(e),this.$store.commit("SET_USER_INFO",JSON.stringify(e)),localStorage.setItem("userInfo",JSON.stringify(e)),this.$message({type:"success",message:"注册成功",customClass:"el-message-custom"}),this.activeStep=3,this.timerGoToHome=setInterval((function(){t.timeGoToHome--,0===t.timeGoToHome&&t.handleGoToHome()}),1e3)},handleGetVerification:function(){this.fetchVerification()},fetchVerification:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.verificationInterval(),this.$api.VERIFY_CODE({data:{phone:this.formBaseData.phone},returnError:!0}).then((function(){t.$message({type:"success",message:"验证码发送成功",customClass:"el-message-custom"})})).catch((function(e){var a=e.msg;t.verificationClearInterval(),t.$message({type:"error",message:a,customClass:"el-message-custom"})}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),verificationInterval:function(){var e=this;this.timeVerification--,this.verificationTxt="".concat(this.timeVerification,"后可重获"),this.timerVerification=setInterval((function(){e.timeVerification--,e.verificationTxt="".concat(e.timeVerification,"后可重获"),0===e.timeVerification&&e.verificationClearInterval()}),1e3)},verificationClearInterval:function(){clearInterval(this.timerVerification),this.verificationTxt="获取验证码",this.timeVerification=60},handleGoToHome:function(){clearInterval(this.timerGoToHome),this.$router.push({name:"home"})}}},n=o,l=(a("66ea"),a("2877")),c=Object(l["a"])(n,r,i,!1,null,"2fb4df8c",null);t["default"]=c.exports},a14a4:function(e,t,a){}}]);